services:

  app-server:
    image: app-server-image
    build:
      context: .
      dockerfile: /app/Dockerfile
      args:
        APP_PORT: ${APP_PORT}
        HOST: ${HOST}
    ports:
      - ${APP_PORT}:${APP_PORT}
    env_file:
      - .env
    networks:
      my-network:
        ipv4_address: ${APP_SERVER_PRIVATE_IP}
    restart: on-failure


networks:
  my-network:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.1.0/24

volumes:
  shared_tests:
